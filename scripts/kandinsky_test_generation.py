import io
import sys
import os
import uuid

base_directory = os.getcwd()
sys.path.insert(0, base_directory)

from utility.http import generation_request
from utility.http import request
from utility.minio.cmd import connect_to_minio_client, upload_data
from worker.generation_task.generation_task import GenerationTask
from kandinsky_worker.dataloaders.image_embedding import ImageEmbedding

def read_msgpack_file(file_path):
    """Reads a msgpack file and returns its bytes."""
    with open(file_path, "rb") as f:
        return f.read()

def generate_img2img_generation_jobs_with_kandinsky(image_embedding,
                                                    negative_image_embedding,
                                                    dataset_name,
                                                    prompt_generation_policy,
                                                    self_training= False,
                                                    init_img_path="./test/test_inpainting/white_512x512.jpg"):

    # get sequential ids
    sequential_ids = request.http_get_sequential_id(dataset_name, 1)

    count = 0
    # generate UUID
    task_uuid = str(uuid.uuid4())
    task_type = "img2img_generation_kandinsky"
    model_name = "kandinsky_2_2"
    model_file_name = "kandinsky-2-2-decoder"
    model_file_path = "input/model/kandinsky/kandinsky-2-2-decoder"
    task_input_dict = {
        "strength": 0.75,
        "seed": "",
        "dataset": dataset_name,
        "file_path": sequential_ids[count]+".jpg",
        "init_img": init_img_path,
        "num_images": 1,
        "image_width": 512,
        "image_height": 512,
        "decoder_steps": 100,
        "decoder_guidance_scale": 12,
        "self_training": self_training
    }

    prompt_generation_data={
        "prompt_generation_policy": prompt_generation_policy
    }

    image_embedding= image_embedding.detach().cpu().numpy().tolist()[0]
    negative_image_embedding= image_embedding.detach().cpu().numpy().tolist()[0] if negative_image_embedding is not None else None

    # create the job
    generation_task = GenerationTask(uuid=task_uuid,
                                     task_type=task_type,
                                     model_name=model_name,
                                     model_file_name=model_file_name,
                                     model_file_path=model_file_path,
                                     task_input_dict=task_input_dict,
                                     prompt_generation_data=prompt_generation_data)
    generation_task_json = generation_task.to_dict()

    # add job
    response = generation_request.http_add_kandinsky_job(job=generation_task_json,
                                                         positive_embedding=image_embedding,
                                                         negative_embedding=negative_image_embedding)

    return response

import torch

if __name__ == "__main__":
    image_embedding_list = [-1.876953125, 1.2294921875, -1.9423828125, -1.537109375, 1.685546875, 1.7138671875, 1.6025390625, 0.8955078125, -0.599609375, -1.4326171875, -0.444580078125, -2.720703125, 0.60107421875, 0.36376953125, 1.7958984375, 0.919921875, -1.0390625, -0.157470703125, 0.238525390625, -0.1055908203125, -0.3388671875, -0.47607421875, -1.029296875, -0.296630859375, -1.708984375, -1.3251953125, 0.97705078125, -2.283203125, -0.83984375, 0.11456298828125, -0.7431640625, -2.193359375, 0.1671142578125, -1.5625, -1.533203125, -0.37109375, 1.1201171875, 0.3486328125, 0.736328125, 1.1357421875, 2.216796875, -1.9736328125, 0.08587646484375, 0.83154296875, 0.5634765625, 0.81201171875, -1.71875, -0.619140625, -0.84814453125, -0.259765625, -0.10870361328125, -0.7783203125, -0.841796875, -0.439208984375, -1.626953125, -0.22998046875, -3.62890625, 2.552734375, 1.28515625, 0.8271484375, -0.141357421875, -1.27734375, 5.19140625, 0.552734375, 1.34765625, -0.5771484375, -0.410888671875, -0.89306640625, -2.013671875, 0.1689453125, -1.0576171875, 0.85986328125, -0.409912109375, 0.01015472412109375, -1.1435546875, 0.353759765625, 0.79736328125, 0.51806640625, 0.59130859375, -2.400390625, -0.49609375, -1.7431640625, -0.64404296875, 0.66845703125, 0.1458740234375, -0.48681640625, 0.50439453125, -0.6494140625, -1.244140625, 1.01953125, -1.6044921875, -0.1226806640625, -0.2337646484375, -0.1453857421875, -0.320556640625, -0.371337890625, -0.81689453125, 0.6123046875, -1.142578125, -1.763671875, -0.4384765625, 0.6865234375, -0.5625, -0.95947265625, 0.578125, 0.194580078125, -1.044921875, 1.1552734375, -1.56640625, 0.1370849609375, 0.304443359375, -1.0283203125, 1.146484375, -1.783203125, 0.7431640625, -1.0869140625, 0.1253662109375, -0.1513671875, 1.32421875, 1.0185546875, 1.048828125, -0.296875, 0.11077880859375, 0.67138671875, -0.107421875, -0.63916015625, 0.9296875, 0.8759765625, 1.603515625, 0.85302734375, 0.95458984375, -0.50146484375, 1.232421875, 0.053070068359375, 0.0606689453125, -1.5341796875, 1.0107421875, 0.67431640625, -0.44677734375, 0.9482421875, 1.5244140625, 2.4296875, 0.01422119140625, 0.480712890625, -0.7548828125, -0.41748046875, 2.353515625, 0.7880859375, -0.447021484375, 0.970703125, -3.169921875, -0.2032470703125, -1.0107421875, 0.1954345703125, -0.2548828125, -1.443359375, -1.14453125, -0.36767578125, 0.403564453125, -0.84130859375, -1.197265625, 1.8955078125, -0.450927734375, 0.330810546875, 0.69580078125, -0.90673828125, 0.369873046875, -0.352294921875, -1.4619140625, -0.68115234375, -0.60546875, 1.564453125, -1.673828125, 1.548828125, -0.1871337890625, -0.393798828125, -0.413818359375, -1.453125, -0.57958984375, 0.30078125, -0.6962890625, 1.5146484375, 0.5615234375, -2.955078125, -0.140625, 1.2607421875, 0.57666015625, 0.15283203125, -0.6494140625, 0.67138671875, -0.7275390625, 0.197509765625, 1.396484375, -0.1795654296875, -0.892578125, -0.11407470703125, -1.203125, -0.73779296875, -0.59130859375, 0.7841796875, 2.392578125, 1.2314453125, -4.828125, 1.380859375, 0.057159423828125, -0.6015625, -0.42431640625, 0.34033203125, 2.771484375, 0.580078125, -0.047149658203125, -0.650390625, 0.3134765625, -0.66455078125, 0.485595703125, 0.55810546875, -1.353515625, 0.2783203125, 1.15234375, 0.0672607421875, 1.16015625, -0.765625, -2.701171875, 0.1624755859375, -0.97265625, 0.2041015625, 0.054962158203125, -0.939453125, 2.177734375, -0.468017578125, 1.5087890625, 0.042724609375, -0.054718017578125, -0.11590576171875, -0.58544921875, -0.256103515625, -1.1982421875, 0.50390625, -0.2291259765625, -0.106689453125, -0.36083984375, -1.71484375, -1.845703125, 1.4052734375, -0.0296630859375, 0.486572265625, -1.169921875, 1.34375, 0.352783203125, 0.61279296875, -0.7001953125, 0.73779296875, -0.85693359375, 0.9189453125, -2.0, -4.0390625, -1.62890625, 2.3671875, -1.49609375, 1.25, -0.78125, -1.576171875, 0.338623046875, 0.583984375, 0.2205810546875, -2.453125, -4.51953125, 1.2392578125, 1.2236328125, -2.31640625, -1.62109375, -0.86767578125, -0.144287109375, 0.82666015625, 0.1439208984375, -0.40380859375, -1.5625, 0.8701171875, 0.253662109375, 4.25, -1.140625, 1.458984375, 0.3701171875, -0.2349853515625, 0.7421875, -1.1337890625, 0.275146484375, 0.0943603515625, -0.599609375, 1.546875, -1.046875, -1.9599609375, -1.3134765625, -1.7685546875, -0.8466796875, 0.1329345703125, 1.328125, 0.1793212890625, -1.9716796875, 1.0185546875, 0.9599609375, -1.04296875, 1.0771484375, 2.154296875, -0.015106201171875, -1.0732421875, -0.5927734375, -0.209228515625, -1.994140625, 0.95849609375, -3.07421875, 0.058441162109375, 0.810546875, 0.36962890625, 0.751953125, -2.107421875, -0.300048828125, 1.5, -0.052032470703125, 1.2939453125, 0.560546875, -1.15234375, 0.2257080078125, 0.12127685546875, -1.970703125, 0.231689453125, 1.056640625, 1.185546875, -0.1453857421875, -1.1455078125, 0.736328125, 1.0927734375, -0.07757568359375, -1.513671875, -1.0556640625, -0.955078125, 2.6015625, 0.318359375, 0.14208984375, -1.93359375, 2.146484375, 0.53662109375, -2.490234375, 1.748046875, 0.33203125, 1.5361328125, -0.8037109375, 0.301025390625, 2.642578125, 0.01065826416015625, 1.6474609375, -0.34326171875, -3.7734375, -0.43359375, -0.552734375, 2.033203125, -1.71875, 0.0286865234375, -1.6171875, -0.048797607421875, -2.04296875, -0.5908203125, 
                       1.9853515625, 0.463134765625, -0.436767578125, -0.302001953125, 0.151123046875, -0.1158447265625, -1.5693359375, 1.349609375, 0.47216796875, -0.269775390625, 2.2734375, 0.158935546875, 2.7421875, -0.583984375, -1.3466796875, 1.7392578125, -0.56298828125, 0.02490234375, 0.4853515625, 0.127197265625, 0.134033203125, -0.73291015625, -0.25537109375, 0.05755615234375, 0.71826171875, 0.61474609375, 3.115234375, -0.6025390625, -3.189453125, 0.68603515625, -0.939453125, 0.888671875, 0.32177734375, -0.5615234375, -1.1533203125, 1.927734375, 1.498046875, -1.396484375, 0.5615234375, -3.443359375, -1.0693359375, -2.130859375, 0.09442138671875, -0.69140625, 1.8583984375, 1.3515625, 0.57470703125, -0.31591796875, -2.9375, -0.03936767578125, 2.15625, -0.1109619140625, -0.6904296875, -0.81689453125, 1.658203125, -0.197998046875, -1.375, -0.404541015625, 1.626953125, -0.6611328125, 1.630859375, 0.86767578125, -0.60595703125, 0.7529296875, 0.37646484375, -2.029296875, -0.86962890625, 1.302734375, 1.3740234375, 0.3427734375, -0.005901336669921875, -1.423828125, -0.312744140625, -0.1558837890625, -0.64013671875, 1.7197265625, -1.9111328125, 0.53173828125, 0.71044921875, 0.9462890625, -1.578125, 1.0830078125, -0.5009765625, -0.1080322265625, 2.591796875, -0.28369140625, 0.160888671875, -1.0869140625, -0.76220703125, 0.142578125, 0.291015625, 2.123046875, -0.830078125, 1.62890625, -0.71728515625, -0.2281494140625, -1.740234375, -0.258056640625, 1.7646484375, -1.7099609375, -0.443359375, 0.02069091796875, 1.9306640625, 1.09765625, -0.054901123046875, 0.01003265380859375, -1.4228515625, 0.568359375, -0.341064453125, -0.76416015625, 0.26220703125, 1.0625, 1.1162109375, -0.552734375, 0.1597900390625, 0.51123046875, 0.332275390625, 0.46533203125, -0.309814453125, -0.88134765625, 0.8974609375, -0.409912109375, 0.0904541015625, -1.2568359375, 1.888671875, -0.330078125, -1.125, -0.409423828125, 1.2744140625, 1.0234375, -0.451904296875, -0.376953125, 0.491455078125, -0.91259765625, 0.331298828125, 1.23828125, 1.0556640625, 1.6806640625, 0.13037109375, 0.289306640625, 0.1868896484375, 0.26220703125, -0.6162109375, -1.4287109375, -0.69580078125, 1.12890625, 0.1124267578125, -0.09600830078125, 1.0791015625, 0.5009765625, 1.509765625, -1.9921875, -2.439453125, -0.88720703125, -1.8955078125, -4.2734375, -0.65380859375, -1.2607421875, 1.1552734375, -0.2391357421875, -0.75830078125, -0.381103515625, -0.900390625, 0.95068359375, -0.25537109375, -0.91650390625, 1.0703125, -1.0498046875, -1.6259765625, 1.4599609375, -0.90478515625, 1.119140625, 0.26904296875, -1.1337890625, -0.9970703125, 0.689453125, 1.0849609375, 1.57421875, -0.457275390625, 0.7490234375, -0.28955078125, -2.65234375, -0.0361328125, 2.0546875, 0.360107421875, -0.332763671875, 0.364501953125, 0.0257110595703125, 0.4091796875, -1.068359375, 0.68505859375, 0.71337890625, 0.87744140625, 1.880859375, -2.37890625, -0.849609375, 0.416748046875, -1.1552734375, 0.3076171875, 0.84912109375, -0.5947265625, -1.0439453125, -1.484375, -0.16650390625, 0.3623046875, 0.1741943359375, -1.509765625, 0.49365234375, -0.57080078125, 0.7705078125, -1.17578125, 0.5654296875, -0.5810546875, -2.013671875, 1.341796875, -0.9609375, 0.53515625, -1.2431640625, -0.970703125, 2.103515625, 0.8056640625, 1.134765625, 0.43896484375, 0.6083984375, 0.70361328125, -0.447998046875, 2.0546875, 0.114990234375, -0.06866455078125, -1.4970703125, 0.1771240234375, -0.2467041015625, 0.57861328125, 1.1201171875, -0.64404296875, 0.64892578125, 0.94287109375, 0.8115234375, 2.353515625, -1.923828125, 0.8271484375, 0.1524658203125, -0.1505126953125, 1.462890625, 1.9013671875, -1.2216796875, -0.56201171875, -0.1385498046875, -2.904296875, -0.07781982421875, -1.2177734375, 0.8369140625, -0.362548828125, 0.324951171875, -1.66015625, 0.334228515625, 0.27685546875, -1.234375, -0.266357421875, 0.63720703125, 1.453125, 1.65234375, -2.498046875, -0.5283203125, -0.91015625, -1.607421875, 1.29296875, 1.3720703125, 1.1494140625, 0.0877685546875, -0.36865234375, 2.48046875, -0.72998046875, -2.234375, 1.73046875, 0.338623046875, 1.96875, -0.3857421875, 0.5576171875, 2.310546875, 1.044921875, -1.1533203125, -1.4599609375, 1.1337890625, -0.8837890625, -1.841796875, 2.638671875, -0.07366943359375, 0.7197265625, 0.150146484375, 0.490234375, 1.2529296875, 0.2020263671875, 0.72802734375, -0.21240234375, -0.48876953125, -1.71875, -1.2646484375, -0.1494140625, -1.1826171875, 0.340087890625, 0.890625, -0.3203125, -0.7490234375, 0.8447265625, 0.82568359375, -0.60791015625, 1.8955078125, 0.417724609375, -0.35888671875, 2.181640625, 1.0849609375, 1.404296875, -0.2161865234375, 0.419921875, -1.3291015625, 0.6591796875, 0.10321044921875, 0.3935546875, -0.1787109375, 0.65869140625, -0.1865234375, -1.3740234375, 1.419921875, -0.4150390625, 0.3056640625, 2.736328125, -0.94482421875, -0.1788330078125, -0.22705078125, -0.325927734375, -1.62109375, -0.1370849609375, 0.97412109375, 0.4482421875, -0.7861328125, 0.36865234375, -0.65478515625, -0.2359619140625, 0.7265625, 0.073974609375, -0.51416015625, -1.1103515625, 0.1658935546875, -0.890625, 0.274169921875, -1.5546875, -0.74853515625, -0.61865234375, -0.76318359375, 1.7265625, -0.77734375, 0.51708984375, -1.826171875, -0.46484375, -0.0885009765625, 0.5966796875, 1.08203125, 0.05035400390625, -1.830078125, 1.162109375, -0.80908203125, -2.205078125, -1.0791015625, -0.0911865234375, -1.1796875, 0.61328125, -1.1611328125, -0.405029296875, -0.4365234375, -1.7119140625, 0.267578125, -0.1419677734375, 1.263671875, -1.541015625, 1.98828125, -0.10626220703125, 0.72705078125, 1.0830078125, -0.2254638671875, -1.0009765625, 0.4296875, -1.1474609375, -0.06634521484375, 1.6025390625, -0.626953125, 0.6904296875, -0.195068359375, 0.499267578125, -0.1424560546875, -0.6064453125, -0.477294921875, 0.04486083984375, -0.806640625, 0.0304412841796875, 0.845703125, 1.248046875, 0.379638671875, 1.8974609375, 0.5771484375, -0.0927734375, -0.36328125, -1.95703125, 1.4697265625, -1.767578125, 0.84033203125, -0.6796875, -0.955078125, 0.30908203125, 1.3212890625, 0.137939453125, -0.52392578125, 0.634765625, 0.345458984375, -0.44287109375, -2.548828125, -0.296875, 0.071533203125, 0.92822265625, -0.277587890625, -1.64453125, -0.350341796875, 0.8955078125, -0.95556640625, -1.8896484375, 2.123046875, 2.326171875, -0.525390625, -0.2027587890625, 0.1005859375, -0.85205078125, 0.74951171875, 1.3779296875, -1.765625, -0.701171875, 1.216796875, 0.442138671875, -0.0924072265625, -2.2734375, 0.95556640625, -1.87109375, 1.900390625, -0.8369140625, -0.41455078125, 0.205810546875, 0.35595703125, -1.3583984375, -1.7939453125, -0.77783203125, -0.469970703125, 0.6240234375, 0.90087890625, -1.619140625, -0.60595703125, 1.0302734375, -0.380859375, 0.498046875, 1.3115234375, 0.7001953125, -1.298828125, 0.263916015625, -0.0264434814453125, 1.4072265625, 0.46630859375, 1.453125, 0.08056640625, 0.321044921875, 0.61376953125, 0.249267578125, -0.410400390625, 1.0302734375, -0.41943359375, -2.24609375, 0.28564453125, -0.3125, -0.6064453125, 0.499267578125, 1.5146484375, -1.4609375, -1.8408203125, 1.2275390625, -0.494384765625, 0.0257415771484375, 0.2451171875, -0.07623291015625, -0.87744140625, 0.29833984375, 0.3271484375, 1.328125, -0.110595703125, 0.9970703125, -0.294677734375, -0.328369140625, -1.0654296875, 0.90966796875, 0.2548828125, 0.319580078125, 0.01067352294921875, 0.1531982421875, -0.92529296875, -0.410400390625, -0.1456298828125, 0.98388671875, 1.208984375, 1.005859375, -2.201171875, -0.986328125, 0.292724609375, 1.517578125, 0.31689453125, -0.5673828125, 1.3759765625, -1.0244140625, -0.87890625, -1.103515625, -0.262451171875, 0.1390380859375, -1.3525390625, 0.2568359375, 0.2412109375, 0.0966796875, 0.44482421875, 0.90771484375, 0.4365234375, -0.418212890625, -0.368408203125, 1.6630859375, 0.16015625, -1.4775390625, -0.84326171875, -0.701171875, -0.0408935546875, -1.43359375, 0.0543212890625, -0.2371826171875, 0.22998046875, 0.210205078125, -1.6943359375, -0.8818359375, -0.9248046875, -0.6318359375, 0.09490966796875, 0.049346923828125, 1.4267578125, -0.921875, -1.39453125, 3.76171875, 2.609375, -0.62548828125, -1.3818359375, -0.7822265625, -2.0390625, -4.40234375, -1.248046875, -0.331787109375, 0.65185546875, 0.8193359375, 0.0225067138671875, -1.6025390625, -0.86279296875, 0.97021484375, 0.8740234375, -0.517578125, -0.85791015625, 1.3662109375, 0.333984375, -0.3310546875, 1.275390625, -0.703125, 2.943359375, -0.96875, 0.97900390625, -0.47705078125, 0.71435546875, -0.85888671875, 1.7685546875, -1.7353515625, -0.642578125, -0.161865234375, -0.52880859375, 1.283203125, 1.9814453125, 0.039825439453125, 0.21923828125, -0.27978515625, -0.7333984375, 0.69482421875, -0.7119140625, -0.19873046875, 1.2080078125, 0.321044921875, -0.8486328125, 0.06732177734375, -0.04852294921875, -0.311279296875, 1.34765625, 0.1878662109375, 0.9970703125, 0.04290771484375, -1.0615234375, 0.09149169921875, -1.080078125, -0.498046875, 0.7939453125, 2.47265625, -0.90673828125, 0.63720703125, 1.1044921875, 0.40478515625, -0.156982421875, 1.8330078125, -1.8671875, -0.1492919921875, 1.1162109375, 0.185302734375, 1.0859375, 0.44970703125, -0.634765625, -0.97705078125, 0.435302734375, 1.0927734375, -0.9111328125, -1.0703125, 0.5107421875, -1.2392578125, 1.87890625, -0.50390625, 2.181640625, 1.5322265625, -1.14453125, -1.9130859375, 0.77099609375, 0.397705078125, -0.7421875, -0.431640625, -0.465087890625, -1.3037109375, 0.1939697265625, -0.211181640625, 0.52197265625, -0.0406494140625, 0.759765625, 0.341552734375, 1.1328125, 0.0810546875, 0.791015625, 0.3798828125, -0.79541015625, -1.3779296875, -0.72509765625, 1.07421875, 1.8369140625, -1.021484375, 0.9638671875, -0.171630859375, 2.201171875, -1.166015625, 0.024566650390625, 0.55029296875, 0.472412109375, -1.49609375, 2.1875, -0.78076171875, 1.029296875, 0.1663818359375, -0.244140625, 0.736328125, -1.1640625, 0.454833984375, 0.471923828125, -0.888671875, 1.43359375, 0.59765625, 0.350830078125, -0.6630859375, 0.583984375, -0.03009033203125, 0.460205078125, 0.1822509765625, 0.190185546875, -0.63720703125, -0.822265625, 0.496337890625, 1.638671875, 0.7890625, 1.6337890625, 0.3662109375, -1.62890625, 1.0400390625, 0.86767578125, 0.80908203125, 0.85693359375, 0.00337982177734375, 0.51416015625, 2.275390625, 0.52978515625, -0.984375, -1.2216796875, -3.201171875, -0.77490234375, -2.35546875, -0.040740966796875, 0.916015625, 0.2445068359375, -0.72998046875, 0.84228515625, 0.1378173828125, -0.06573486328125, -0.0731201171875, 1.1240234375, -0.28271484375, 1.2578125, -0.002590179443359375, -0.40771484375, -0.035614013671875, 0.0374755859375, -1.56640625, -0.1392822265625, 0.0244903564453125, 0.249755859375, -0.56103515625, -0.85009765625, 2.544921875, 0.203369140625, -0.62548828125, -0.243408203125, 0.9296875, -0.9912109375, 1.431640625, -0.129638671875, 0.292236328125, -1.7509765625, -0.2108154296875, -1.6416015625, 1.8623046875, -0.84619140625, -0.53125, -0.52978515625, 1.1259765625, 0.3017578125, 0.3671875, -0.30126953125, 0.28662109375, -0.1983642578125, -0.394287109375, 0.0654296875, 1.080078125, -0.84765625, 0.73095703125, -1.33984375, -0.2373046875, 0.18896484375, 0.39208984375, 1.4267578125, 0.76318359375, 0.79833984375, 1.2802734375, -0.66796875, -0.434326171875, 0.2281494140625, -0.29443359375, 0.006847381591796875, -0.18701171875, -0.95703125, -0.96435546875, -1.59375, -1.28515625, -1.6025390625, -0.90673828125, -0.2183837890625, 0.2349853515625, 1.533203125, 1.16015625, 0.34228515625, 1.072265625, 0.6943359375, -0.94580078125, -0.73974609375, -1.115234375, -2.15234375, 1.3115234375, -3.103515625, -1.591796875, -0.406982421875, 1.1708984375, -1.744140625, 1.4921875, 1.3251953125, 0.368896484375, 0.5615234375, -0.482421875, 0.5283203125, -1.4853515625, -0.45849609375, 1.787109375, 1.5029296875, 0.403564453125, -1.4814453125, 0.403564453125, 1.796875, -0.77734375, -1.5205078125, -0.06451416015625, 0.2159423828125, 0.44189453125, -0.82666015625, -0.333251953125, 0.5859375, -0.018341064453125, -0.65380859375, 1.072265625, -1.1708984375, -0.30810546875, -0.42138671875, -1.71875, -1.1220703125, 1.501953125, 1.08984375, 0.12335205078125, -0.11712646484375, -0.11065673828125, 0.265625, 1.583984375, 0.2034912109375, -1.2890625, 4.38671875, -0.231201171875, 0.97900390625, -0.10089111328125, 0.481201171875, -0.46826171875, -0.172607421875, 0.128662109375, -0.275390625, 1.4892578125, -0.841796875, -1.53515625, -0.73095703125, -2.265625, 1.0029296875, 0.89892578125, -0.509765625, -1.1259765625, 0.060211181640625, -1.7314453125, -1.953125, 0.97998046875, 0.274169921875, -0.53076171875, 0.6962890625, -0.438232421875, 0.52294921875, -0.07794189453125, -3.892578125, -0.128662109375, 0.6845703125, -2.49609375, 0.53466796875, 0.15087890625, 0.53564453125, -1.53515625, -1.2412109375, -3.21875, -2.33203125, -1.0087890625, 0.75732421875, -0.0081787109375, 0.21240234375, -1.431640625, 0.92431640625, -1.7080078125, 0.86767578125, -4.23828125, -0.169921875, -0.1778564453125, 0.493408203125, -1.3173828125, -0.14501953125, -0.187255859375, -0.89990234375, 0.50048828125, 2.16015625, 0.51416015625, -0.71923828125, -1.03125, -0.383544921875, 0.09417724609375, -0.474365234375, -0.302978515625, -0.91259765625, 0.7646484375, -0.1827392578125, -0.1800537109375, 0.2310791015625, 0.1434326171875, 1.93359375, -0.1488037109375, -0.0016698837280273438, -1.9150390625, 0.45166015625, 2.54296875, 1.66796875, 0.5849609375, 0.27880859375, 0.2496337890625, 0.818359375, -0.491943359375, 0.6943359375, 1.7099609375, 0.0816650390625, -1.2177734375, 0.97998046875, 2.490234375, -0.93896484375, -0.69580078125, -0.42822265625, -2.736328125, -0.4375]


    image_embedding_tensor = torch.tensor(image_embedding_list).float() 
    negative_image_embedding = None
    prompt_generation_policy = "top-k"

    # Generate img2img generation jobs with Kandinsky using the embeddings
    response = generate_img2img_generation_jobs_with_kandinsky(
        image_embedding=image_embedding_tensor,
        negative_image_embedding = None,  
        dataset_name="test-generations",
        prompt_generation_policy=prompt_generation_policy
    )

    print(response)